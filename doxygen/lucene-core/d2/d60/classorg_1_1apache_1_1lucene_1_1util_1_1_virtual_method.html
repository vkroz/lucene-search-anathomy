<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lucene-core-API: org.apache.lucene.util.VirtualMethod&lt; C &gt; Class Template Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Lucene-core-API
   &#160;<span id="projectnumber">8.0.0-SNAPSHOT</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="../../d5/d1b/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">org.apache.lucene.util.VirtualMethod&lt; C &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A utility for keeping backwards compatibility on previously abstract methods (or similar replacements).  
 <a href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afed39c1a43c844c7ae1714efdbead4f2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html#afed39c1a43c844c7ae1714efdbead4f2">VirtualMethod</a> (Class&lt; C &gt; baseClass, String method, Class&lt;?&gt;... parameters)</td></tr>
<tr class="memdesc:afed39c1a43c844c7ae1714efdbead4f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new instance for the given.  <a href="#afed39c1a43c844c7ae1714efdbead4f2">More...</a><br /></td></tr>
<tr class="separator:afed39c1a43c844c7ae1714efdbead4f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2d88d76545470b69c313b87a55bedf9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html#af2d88d76545470b69c313b87a55bedf9">getImplementationDistance</a> (final Class&lt;? extends C &gt; subclazz)</td></tr>
<tr class="memdesc:af2d88d76545470b69c313b87a55bedf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the distance from the.  <a href="#af2d88d76545470b69c313b87a55bedf9">More...</a><br /></td></tr>
<tr class="separator:af2d88d76545470b69c313b87a55bedf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae0cb56efd06b307e9f2a0c60c29e562"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html#aae0cb56efd06b307e9f2a0c60c29e562">isOverriddenAsOf</a> (final Class&lt;? extends C &gt; subclazz)</td></tr>
<tr class="memdesc:aae0cb56efd06b307e9f2a0c60c29e562"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns, if this method is overridden/implemented in the inheritance path between.  <a href="#aae0cb56efd06b307e9f2a0c60c29e562">More...</a><br /></td></tr>
<tr class="separator:aae0cb56efd06b307e9f2a0c60c29e562"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a38e28bcb347adf58ad41787b9049d92f"><td class="memItemLeft" align="right" valign="top">static&lt; C &gt; int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html#a38e28bcb347adf58ad41787b9049d92f">compareImplementationDistance</a> (final Class&lt;? extends C &gt; clazz, final <a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html">VirtualMethod</a>&lt; C &gt; m1, final <a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html">VirtualMethod</a>&lt; C &gt; m2)</td></tr>
<tr class="memdesc:a38e28bcb347adf58ad41787b9049d92f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility method that compares the implementation/override distance of two methods.  <a href="#a38e28bcb347adf58ad41787b9049d92f">More...</a><br /></td></tr>
<tr class="separator:a38e28bcb347adf58ad41787b9049d92f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A utility for keeping backwards compatibility on previously abstract methods (or similar replacements). </p>
<p>Before the replacement method can be made abstract, the old method must kept deprecated. If somebody still overrides the deprecated method in a non-final class, you must keep track, of this and maybe delegate to the old method in the subclass. The cost of reflection is minimized by the following usage of this class:</p>
<p>Define <b>static final</b> fields in the base class (</p><div class="fragment"><div class="line">BaseClass </div></div><!-- fragment --><p> ), where the old and new method are declared:</p>
<pre class="prettyprint">
 static final <a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html" title="A utility for keeping backwards compatibility on previously abstract methods (or similar replacements...">VirtualMethod</a>&lt;BaseClass&gt; newMethod =
  new <a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html" title="A utility for keeping backwards compatibility on previously abstract methods (or similar replacements...">VirtualMethod</a>&lt;BaseClass&gt;(BaseClass.class, "newName", parameters...);
 static final <a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html" title="A utility for keeping backwards compatibility on previously abstract methods (or similar replacements...">VirtualMethod</a>&lt;BaseClass&gt; oldMethod =
  new <a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html" title="A utility for keeping backwards compatibility on previously abstract methods (or similar replacements...">VirtualMethod</a>&lt;BaseClass&gt;(BaseClass.class, "oldName", parameters...);
</pre> <p>This enforces the singleton status of these objects, as the maintenance of the cache would be too costly else. If you try to create a second instance of for the same method/</p><div class="fragment"><div class="line">baseClass </div></div><!-- fragment --><p> combination, an exception is thrown. </p>
<p>To detect if e.g. the old method was overridden by a more far subclass on the inheritance path to the current instance's class, use a <b>non-static</b> field:</p>
<pre class="prettyprint">
 final boolean isDeprecatedMethodOverridden =
  oldMethod.getImplementationDistance(this.getClass()) &gt; newMethod.getImplementationDistance(this.getClass());</pre><pre class="prettyprint"> <em>// alternatively (more readable):</em>
 final boolean isDeprecatedMethodOverridden =
  <a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html#a38e28bcb347adf58ad41787b9049d92f" title="Utility method that compares the implementation/override distance of two methods. ...">VirtualMethod.compareImplementationDistance</a>(this.getClass(), oldMethod, newMethod) &gt; 0
</pre> <p><a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html#af2d88d76545470b69c313b87a55bedf9">getImplementationDistance</a> returns the distance of the subclass that overrides this method. The one with the larger distance should be used preferable. This way also more complicated method rename scenarios can be handled (think of 2.9</p><div class="fragment"><div class="line">TokenStream </div></div><!-- fragment --><p> deprecations).</p>
<p>.internal </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="afed39c1a43c844c7ae1714efdbead4f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afed39c1a43c844c7ae1714efdbead4f2">&#9670;&nbsp;</a></span>VirtualMethod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html">org.apache.lucene.util.VirtualMethod</a>&lt; C &gt;.<a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html">VirtualMethod</a> </td>
          <td>(</td>
          <td class="paramtype">Class&lt; C &gt;&#160;</td>
          <td class="paramname"><em>baseClass</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Class&lt;?&gt;...&#160;</td>
          <td class="paramname"><em>parameters</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new instance for the given. </p>
<div class="fragment"><div class="line">baseClass </div></div><!-- fragment --><p> and method declaration. </p><dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">UnsupportedOperationException</td><td>if you create a second instance of the same <div class="fragment"><div class="line">baseClass </div></div><!-- fragment --> and method declaration combination. This enforces the singleton status. </td></tr>
    <tr><td class="paramname">IllegalArgumentException</td><td>if<div class="fragment"><div class="line">baseClass </div></div><!-- fragment --> does not declare the given method. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a38e28bcb347adf58ad41787b9049d92f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38e28bcb347adf58ad41787b9049d92f">&#9670;&nbsp;</a></span>compareImplementationDistance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static &lt;C&gt; int <a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html">org.apache.lucene.util.VirtualMethod</a>&lt; C &gt;.compareImplementationDistance </td>
          <td>(</td>
          <td class="paramtype">final Class&lt;? extends C &gt;&#160;</td>
          <td class="paramname"><em>clazz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final <a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html">VirtualMethod</a>&lt; C &gt;&#160;</td>
          <td class="paramname"><em>m1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">final <a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html">VirtualMethod</a>&lt; C &gt;&#160;</td>
          <td class="paramname"><em>m2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Utility method that compares the implementation/override distance of two methods. </p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>
&gt; 1, iff<div class="fragment"><div class="line">m1 </div></div><!-- fragment --> is overridden/implemented in a subclass of the class overriding/declaring<div class="fragment"><div class="line">m2 </div></div><!-- fragment --> </li>
<li>
&lt; 1, iff<div class="fragment"><div class="line">m2 </div></div><!-- fragment --> is overridden in a subclass of the class overriding/declaring<div class="fragment"><div class="line">m1 </div></div><!-- fragment --> </li>
<li>
0, iff both methods are overridden in the same class (or are not overridden at all) </li>
</ul>
</dd></dl>

</div>
</div>
<a id="af2d88d76545470b69c313b87a55bedf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2d88d76545470b69c313b87a55bedf9">&#9670;&nbsp;</a></span>getImplementationDistance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html">org.apache.lucene.util.VirtualMethod</a>&lt; C &gt;.getImplementationDistance </td>
          <td>(</td>
          <td class="paramtype">final Class&lt;? extends C &gt;&#160;</td>
          <td class="paramname"><em>subclazz</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the distance from the. </p>
<div class="fragment"><div class="line">baseClass </div></div><!-- fragment --><p> in which this method is overridden/implemented in the inheritance path between</p><div class="fragment"><div class="line">baseClass </div></div><!-- fragment --><p> and the given subclass</p><div class="fragment"><div class="line">subclazz </div></div><!-- fragment --><p> . </p><dl class="section return"><dt>Returns</dt><dd>0 iff not overridden, else the distance to the base class </dd></dl>

</div>
</div>
<a id="aae0cb56efd06b307e9f2a0c60c29e562"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae0cb56efd06b307e9f2a0c60c29e562">&#9670;&nbsp;</a></span>isOverriddenAsOf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean <a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html">org.apache.lucene.util.VirtualMethod</a>&lt; C &gt;.isOverriddenAsOf </td>
          <td>(</td>
          <td class="paramtype">final Class&lt;? extends C &gt;&#160;</td>
          <td class="paramname"><em>subclazz</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns, if this method is overridden/implemented in the inheritance path between. </p>
<div class="fragment"><div class="line">baseClass </div></div><!-- fragment --><p> and the given subclass</p><div class="fragment"><div class="line">subclazz </div></div><!-- fragment --><p> . </p>
<p>You can use this method to detect if a method that should normally be final was overridden by the given instance's class. </p><dl class="section return"><dt>Returns</dt><dd><div class="fragment"><div class="line"><span class="keyword">false</span> </div></div><!-- fragment --> iff not overridden </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/Users/vkroz/src/oss/lucene-solr/lucene/core/src/java/org/apache/lucene/util/VirtualMethod.java</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>org</b></li><li class="navelem"><b>apache</b></li><li class="navelem"><a class="el" href="../../d8/d76/namespaceorg_1_1apache_1_1lucene.html">lucene</a></li><li class="navelem"><a class="el" href="../../df/d82/namespaceorg_1_1apache_1_1lucene_1_1util.html">util</a></li><li class="navelem"><a class="el" href="../../d2/d60/classorg_1_1apache_1_1lucene_1_1util_1_1_virtual_method.html">VirtualMethod</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
