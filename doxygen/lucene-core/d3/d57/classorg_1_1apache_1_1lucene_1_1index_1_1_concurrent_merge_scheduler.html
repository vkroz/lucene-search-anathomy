<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lucene-core-API: org.apache.lucene.index.ConcurrentMergeScheduler Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Lucene-core-API
   &#160;<span id="projectnumber">8.0.0-SNAPSHOT</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="../../d4/dc4/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">org.apache.lucene.index.ConcurrentMergeScheduler Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A <a class="el" href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html">MergeScheduler</a> that runs each merge using a separate thread.  
 <a href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for org.apache.lucene.index.ConcurrentMergeScheduler:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d9c/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler__inherit__graph.png" border="0" usemap="#org_8apache_8lucene_8index_8_concurrent_merge_scheduler_inherit__map" alt="Inheritance graph"/></div>
<map name="org_8apache_8lucene_8index_8_concurrent_merge_scheduler_inherit__map" id="org_8apache_8lucene_8index_8_concurrent_merge_scheduler_inherit__map">
<area shape="rect" id="node2" href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html" title="org.apache.lucene.index.\lMergeScheduler" alt="" coords="13,80,183,121"/>
</map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for org.apache.lucene.index.ConcurrentMergeScheduler:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/d9a/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler__coll__graph.png" border="0" usemap="#org_8apache_8lucene_8index_8_concurrent_merge_scheduler_coll__map" alt="Collaboration graph"/></div>
<map name="org_8apache_8lucene_8index_8_concurrent_merge_scheduler_coll__map" id="org_8apache_8lucene_8index_8_concurrent_merge_scheduler_coll__map">
<area shape="rect" id="node2" href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html" title="org.apache.lucene.index.\lMergeScheduler" alt="" coords="487,5,658,47"/>
<area shape="rect" id="node4" href="../../dd/d43/classorg_1_1apache_1_1lucene_1_1util_1_1_info_stream.html" title="Debugging API for Lucene classes such as IndexWriter and SegmentInfos. " alt="" coords="136,71,315,112"/>
</map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d2f/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler_1_1_merge_thread.html">MergeThread</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs a merge thread to execute a single merge, then exits.  <a href="../../d7/d2f/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler_1_1_merge_thread.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:adf17320b8c51a277050ae5717148deaa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#adf17320b8c51a277050ae5717148deaa">ConcurrentMergeScheduler</a> ()</td></tr>
<tr class="memdesc:adf17320b8c51a277050ae5717148deaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sole constructor, with all settings set to default values.  <a href="#adf17320b8c51a277050ae5717148deaa">More...</a><br /></td></tr>
<tr class="separator:adf17320b8c51a277050ae5717148deaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe3252f24171c6057c54a9db0e3c164f"><td class="memItemLeft" align="right" valign="top">synchronized void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#afe3252f24171c6057c54a9db0e3c164f">setMaxMergesAndThreads</a> (int maxMergeCount, int maxThreadCount)</td></tr>
<tr class="memdesc:afe3252f24171c6057c54a9db0e3c164f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expert: directly set the maximum number of merge threads and simultaneous merges allowed.  <a href="#afe3252f24171c6057c54a9db0e3c164f">More...</a><br /></td></tr>
<tr class="separator:afe3252f24171c6057c54a9db0e3c164f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad38ede9b8ebafe9b86426f67a45a5f8"><td class="memItemLeft" align="right" valign="top">synchronized void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#aad38ede9b8ebafe9b86426f67a45a5f8">setDefaultMaxMergesAndThreads</a> (boolean spins)</td></tr>
<tr class="memdesc:aad38ede9b8ebafe9b86426f67a45a5f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets max merges and threads to proper defaults for rotational or non-rotational storage.  <a href="#aad38ede9b8ebafe9b86426f67a45a5f8">More...</a><br /></td></tr>
<tr class="separator:aad38ede9b8ebafe9b86426f67a45a5f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a9657f9d3eee6a044c1d8b9804538b1"><td class="memItemLeft" align="right" valign="top">synchronized void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a9a9657f9d3eee6a044c1d8b9804538b1">setForceMergeMBPerSec</a> (double v)</td></tr>
<tr class="memdesc:a9a9657f9d3eee6a044c1d8b9804538b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the per-merge IO throttle rate for forced merges (default:  <a href="#a9a9657f9d3eee6a044c1d8b9804538b1">More...</a><br /></td></tr>
<tr class="separator:a9a9657f9d3eee6a044c1d8b9804538b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2f55660529b7cf963f98084be01ffcb"><td class="memItemLeft" align="right" valign="top">synchronized double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#af2f55660529b7cf963f98084be01ffcb">getForceMergeMBPerSec</a> ()</td></tr>
<tr class="memdesc:af2f55660529b7cf963f98084be01ffcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the per-merge IO throttle rate for forced merges.  <a href="#af2f55660529b7cf963f98084be01ffcb">More...</a><br /></td></tr>
<tr class="separator:af2f55660529b7cf963f98084be01ffcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeba467437f8ea7083dd62adb930e8f7"><td class="memItemLeft" align="right" valign="top">synchronized void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#abeba467437f8ea7083dd62adb930e8f7">enableAutoIOThrottle</a> ()</td></tr>
<tr class="memdesc:abeba467437f8ea7083dd62adb930e8f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn on dynamic IO throttling, to adaptively rate limit writes bytes/sec to the minimal rate necessary so merges do not fall behind.  <a href="#abeba467437f8ea7083dd62adb930e8f7">More...</a><br /></td></tr>
<tr class="separator:abeba467437f8ea7083dd62adb930e8f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e7b21600dce4b4572df88d62c6a65fc"><td class="memItemLeft" align="right" valign="top">synchronized void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a4e7b21600dce4b4572df88d62c6a65fc">disableAutoIOThrottle</a> ()</td></tr>
<tr class="memdesc:a4e7b21600dce4b4572df88d62c6a65fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn off auto IO throttling.  <a href="#a4e7b21600dce4b4572df88d62c6a65fc">More...</a><br /></td></tr>
<tr class="separator:a4e7b21600dce4b4572df88d62c6a65fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3459271e155a7cc5514dd737c91a0e6a"><td class="memItemLeft" align="right" valign="top">synchronized boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a3459271e155a7cc5514dd737c91a0e6a">getAutoIOThrottle</a> ()</td></tr>
<tr class="memdesc:a3459271e155a7cc5514dd737c91a0e6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if auto IO throttling is currently enabled.  <a href="#a3459271e155a7cc5514dd737c91a0e6a">More...</a><br /></td></tr>
<tr class="separator:a3459271e155a7cc5514dd737c91a0e6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12367e735008a6285df46d63fb34d41a"><td class="memItemLeft" align="right" valign="top">synchronized double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a12367e735008a6285df46d63fb34d41a">getIORateLimitMBPerSec</a> ()</td></tr>
<tr class="memdesc:a12367e735008a6285df46d63fb34d41a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the currently set per-merge IO writes rate limit, if <a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#abeba467437f8ea7083dd62adb930e8f7">enableAutoIOThrottle</a> was called, else.  <a href="#a12367e735008a6285df46d63fb34d41a">More...</a><br /></td></tr>
<tr class="separator:a12367e735008a6285df46d63fb34d41a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a893accfb17230c8a9e988fee0e3fa605"><td class="memItemLeft" align="right" valign="top">synchronized int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a893accfb17230c8a9e988fee0e3fa605">getMaxThreadCount</a> ()</td></tr>
<tr class="memdesc:a893accfb17230c8a9e988fee0e3fa605"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns.  <a href="#a893accfb17230c8a9e988fee0e3fa605">More...</a><br /></td></tr>
<tr class="separator:a893accfb17230c8a9e988fee0e3fa605"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdddd99678b9e1c6200b247c60397167"><td class="memItemLeft" align="right" valign="top">synchronized int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#acdddd99678b9e1c6200b247c60397167">getMaxMergeCount</a> ()</td></tr>
<tr class="memdesc:acdddd99678b9e1c6200b247c60397167"><td class="mdescLeft">&#160;</td><td class="mdescRight">See <a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#afe3252f24171c6057c54a9db0e3c164f">setMaxMergesAndThreads</a>.  <a href="#acdddd99678b9e1c6200b247c60397167">More...</a><br /></td></tr>
<tr class="separator:acdddd99678b9e1c6200b247c60397167"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b4d27b226e65f76a99e147abe148687"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a0b4d27b226e65f76a99e147abe148687">sync</a> ()</td></tr>
<tr class="memdesc:a0b4d27b226e65f76a99e147abe148687"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for any running merge threads to finish.  <a href="#a0b4d27b226e65f76a99e147abe148687">More...</a><br /></td></tr>
<tr class="separator:a0b4d27b226e65f76a99e147abe148687"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac66dd05997dc449229a9d2daf8f4ed03"><td class="memItemLeft" align="right" valign="top">synchronized int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#ac66dd05997dc449229a9d2daf8f4ed03">mergeThreadCount</a> ()</td></tr>
<tr class="memdesc:ac66dd05997dc449229a9d2daf8f4ed03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of merge threads that are alive, ignoring the calling thread if it is a merge thread.  <a href="#ac66dd05997dc449229a9d2daf8f4ed03">More...</a><br /></td></tr>
<tr class="separator:ac66dd05997dc449229a9d2daf8f4ed03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html">org.apache.lucene.index.MergeScheduler</a></td></tr>
<tr class="memitem:a45b786026c72a5641eb1b85cffd3c957 inherit pub_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="memItemLeft" align="right" valign="top">abstract void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html#a45b786026c72a5641eb1b85cffd3c957">merge</a> (<a class="el" href="../../df/dbc/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer.html">IndexWriter</a> writer, <a class="el" href="../../dd/dd6/enumorg_1_1apache_1_1lucene_1_1index_1_1_merge_trigger.html">MergeTrigger</a> trigger, boolean newMergesFound)  throws IOException</td></tr>
<tr class="memdesc:a45b786026c72a5641eb1b85cffd3c957 inherit pub_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the merges provided by <a class="el" href="../../df/dbc/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer.html#a6448ddeddb776d02fbfa77aeb763f78e">IndexWriter#getNextMerge()</a>.  <a href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html#a45b786026c72a5641eb1b85cffd3c957">More...</a><br /></td></tr>
<tr class="separator:a45b786026c72a5641eb1b85cffd3c957 inherit pub_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b6445b23fada9c80c837176a9c7f363 inherit pub_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="memItemLeft" align="right" valign="top"><a id="a8b6445b23fada9c80c837176a9c7f363"></a>
<a class="el" href="../../d3/dcb/classorg_1_1apache_1_1lucene_1_1store_1_1_directory.html">Directory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html#a8b6445b23fada9c80c837176a9c7f363">wrapForMerge</a> (OneMerge <a class="el" href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html#a45b786026c72a5641eb1b85cffd3c957">merge</a>, <a class="el" href="../../d3/dcb/classorg_1_1apache_1_1lucene_1_1store_1_1_directory.html">Directory</a> in)</td></tr>
<tr class="memdesc:a8b6445b23fada9c80c837176a9c7f363 inherit pub_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wraps the incoming <a class="el" href="../../">Directory</a> so that we can merge-throttle it using <a class="el" href="../../">RateLimitedIndexOutput</a>. <br /></td></tr>
<tr class="separator:a8b6445b23fada9c80c837176a9c7f363 inherit pub_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae50a3197c7d23397b16d57e4a2863150 inherit pub_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="memItemLeft" align="right" valign="top">abstract void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html#ae50a3197c7d23397b16d57e4a2863150">close</a> ()  throws IOException</td></tr>
<tr class="memdesc:ae50a3197c7d23397b16d57e4a2863150 inherit pub_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close this <a class="el" href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html">MergeScheduler</a>.  <a href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html#ae50a3197c7d23397b16d57e4a2863150">More...</a><br /></td></tr>
<tr class="separator:ae50a3197c7d23397b16d57e4a2863150 inherit pub_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a682342aa2262dc71e39a267922d7568d"><td class="memItemLeft" align="right" valign="top">static final int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a682342aa2262dc71e39a267922d7568d">AUTO_DETECT_MERGES_AND_THREADS</a> = -1</td></tr>
<tr class="memdesc:a682342aa2262dc71e39a267922d7568d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dynamic default for.  <a href="#a682342aa2262dc71e39a267922d7568d">More...</a><br /></td></tr>
<tr class="separator:a682342aa2262dc71e39a267922d7568d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7225a9086b818a2bb5b4adc5cb2b604"><td class="memItemLeft" align="right" valign="top">static final String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#aa7225a9086b818a2bb5b4adc5cb2b604">DEFAULT_CPU_CORE_COUNT_PROPERTY</a> = &quot;lucene.cms.override_core_count&quot;</td></tr>
<tr class="memdesc:aa7225a9086b818a2bb5b4adc5cb2b604"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used for testing.  <a href="#aa7225a9086b818a2bb5b4adc5cb2b604">More...</a><br /></td></tr>
<tr class="separator:aa7225a9086b818a2bb5b4adc5cb2b604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a2baf5df84008134101839765b3b472"><td class="memItemLeft" align="right" valign="top">static final String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a5a2baf5df84008134101839765b3b472">DEFAULT_SPINS_PROPERTY</a> = &quot;lucene.cms.override_spins&quot;</td></tr>
<tr class="memdesc:a5a2baf5df84008134101839765b3b472"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used for testing.  <a href="#a5a2baf5df84008134101839765b3b472">More...</a><br /></td></tr>
<tr class="separator:a5a2baf5df84008134101839765b3b472"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a31790e5139d99dbd3caa8ceb2089c3ee"><td class="memItemLeft" align="right" valign="top">synchronized void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a31790e5139d99dbd3caa8ceb2089c3ee">updateMergeThreads</a> ()</td></tr>
<tr class="memdesc:a31790e5139d99dbd3caa8ceb2089c3ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called whenever the running merges have changed, to set merge IO limits.  <a href="#a31790e5139d99dbd3caa8ceb2089c3ee">More...</a><br /></td></tr>
<tr class="separator:a31790e5139d99dbd3caa8ceb2089c3ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ae08627b40a76b42fd706007060ff7f"><td class="memItemLeft" align="right" valign="top">synchronized boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a5ae08627b40a76b42fd706007060ff7f">maybeStall</a> (<a class="el" href="../../df/dbc/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer.html">IndexWriter</a> writer)</td></tr>
<tr class="memdesc:a5ae08627b40a76b42fd706007060ff7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is invoked by <a class="el" href="../../">merge</a> to possibly stall the incoming thread when there are too many merges running or pending.  <a href="#a5ae08627b40a76b42fd706007060ff7f">More...</a><br /></td></tr>
<tr class="separator:a5ae08627b40a76b42fd706007060ff7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cdd03d4ab0e0792a91d896626bcc604"><td class="memItemLeft" align="right" valign="top">synchronized void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a9cdd03d4ab0e0792a91d896626bcc604">doStall</a> ()</td></tr>
<tr class="memdesc:a9cdd03d4ab0e0792a91d896626bcc604"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called from <a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a5ae08627b40a76b42fd706007060ff7f">maybeStall</a> to pause the calling thread for a bit.  <a href="#a9cdd03d4ab0e0792a91d896626bcc604">More...</a><br /></td></tr>
<tr class="separator:a9cdd03d4ab0e0792a91d896626bcc604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba73af9d9e475a3bbf976572165dcd59"><td class="memItemLeft" align="right" valign="top"><a id="aba73af9d9e475a3bbf976572165dcd59"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#aba73af9d9e475a3bbf976572165dcd59">doMerge</a> (<a class="el" href="../../df/dbc/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer.html">IndexWriter</a> writer, OneMerge merge)  throws IOException </td></tr>
<tr class="memdesc:aba73af9d9e475a3bbf976572165dcd59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does the actual merge, by calling <a class="el" href="../../df/dbc/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer.html#a96e4c4638add0e7631a3966d79ec81ee">IndexWriter#merge</a>. <br /></td></tr>
<tr class="separator:aba73af9d9e475a3bbf976572165dcd59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25cd85d5604ee8d1460f56b82b595bcc"><td class="memItemLeft" align="right" valign="top"><a id="a25cd85d5604ee8d1460f56b82b595bcc"></a>
synchronized <a class="el" href="../../d7/d2f/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler_1_1_merge_thread.html">MergeThread</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a25cd85d5604ee8d1460f56b82b595bcc">getMergeThread</a> (<a class="el" href="../../df/dbc/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer.html">IndexWriter</a> writer, OneMerge merge)  throws IOException </td></tr>
<tr class="memdesc:a25cd85d5604ee8d1460f56b82b595bcc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create and return a new <a class="el" href="../../d7/d2f/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler_1_1_merge_thread.html" title="Runs a merge thread to execute a single merge, then exits. ">MergeThread</a>. <br /></td></tr>
<tr class="separator:a25cd85d5604ee8d1460f56b82b595bcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a660ec3ead6d92e807d3d591e1ea12286"><td class="memItemLeft" align="right" valign="top"><a id="a660ec3ead6d92e807d3d591e1ea12286"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a660ec3ead6d92e807d3d591e1ea12286">handleMergeException</a> (<a class="el" href="../../d3/dcb/classorg_1_1apache_1_1lucene_1_1store_1_1_directory.html">Directory</a> dir, Throwable exc)</td></tr>
<tr class="memdesc:a660ec3ead6d92e807d3d591e1ea12286"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when an exception is hit in a background merge thread. <br /></td></tr>
<tr class="separator:a660ec3ead6d92e807d3d591e1ea12286"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92c3aaa683ee4e0680fa2dbb4a94a2c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a92c3aaa683ee4e0680fa2dbb4a94a2c2">targetMBPerSecChanged</a> ()</td></tr>
<tr class="memdesc:a92c3aaa683ee4e0680fa2dbb4a94a2c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subclass can override to tweak targetMBPerSec.  <a href="#a92c3aaa683ee4e0680fa2dbb4a94a2c2">More...</a><br /></td></tr>
<tr class="separator:a92c3aaa683ee4e0680fa2dbb4a94a2c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler')"><img src="../../closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html">org.apache.lucene.index.MergeScheduler</a></td></tr>
<tr class="memitem:a2450d2f4fc70ee1447374b46db813644 inherit pro_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html#a2450d2f4fc70ee1447374b46db813644">MergeScheduler</a> ()</td></tr>
<tr class="memdesc:a2450d2f4fc70ee1447374b46db813644 inherit pro_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sole constructor.  <a href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html#a2450d2f4fc70ee1447374b46db813644">More...</a><br /></td></tr>
<tr class="separator:a2450d2f4fc70ee1447374b46db813644 inherit pro_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06e6a87cd4b9eaca2559cd5530e310e5 inherit pro_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html#a06e6a87cd4b9eaca2559cd5530e310e5">verbose</a> ()</td></tr>
<tr class="memdesc:a06e6a87cd4b9eaca2559cd5530e310e5 inherit pro_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if infoStream messages are enabled.  <a href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html#a06e6a87cd4b9eaca2559cd5530e310e5">More...</a><br /></td></tr>
<tr class="separator:a06e6a87cd4b9eaca2559cd5530e310e5 inherit pro_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0947e0597d3ce80a853a5923a6fb0221 inherit pro_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="memItemLeft" align="right" valign="top"><a id="a0947e0597d3ce80a853a5923a6fb0221"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html#a0947e0597d3ce80a853a5923a6fb0221">message</a> (String message)</td></tr>
<tr class="memdesc:a0947e0597d3ce80a853a5923a6fb0221 inherit pro_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Outputs the given message - this method assumes <a class="el" href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html#a06e6a87cd4b9eaca2559cd5530e310e5">verbose()</a> was called and returned true. <br /></td></tr>
<tr class="separator:a0947e0597d3ce80a853a5923a6fb0221 inherit pro_methods_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a843496fc86f6881bed4131a226b8bba4"><td class="memItemLeft" align="right" valign="top">final List&lt; <a class="el" href="../../d7/d2f/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler_1_1_merge_thread.html">MergeThread</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a843496fc86f6881bed4131a226b8bba4">mergeThreads</a> = new ArrayList&lt;&gt;()</td></tr>
<tr class="memdesc:a843496fc86f6881bed4131a226b8bba4"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of currently active <a class="el" href="../../d7/d2f/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler_1_1_merge_thread.html">MergeThread</a>s.  <a href="#a843496fc86f6881bed4131a226b8bba4">More...</a><br /></td></tr>
<tr class="separator:a843496fc86f6881bed4131a226b8bba4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77e4db8be620637399baa6571b55a7a4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a77e4db8be620637399baa6571b55a7a4">mergeThreadCount</a></td></tr>
<tr class="memdesc:a77e4db8be620637399baa6571b55a7a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">How many <a class="el" href="../../d7/d2f/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler_1_1_merge_thread.html">MergeThread</a>s have kicked off (this is use to name them).  <a href="#a77e4db8be620637399baa6571b55a7a4">More...</a><br /></td></tr>
<tr class="separator:a77e4db8be620637399baa6571b55a7a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a251f0ef6521c45cf89b0e44064b38854"><td class="memItemLeft" align="right" valign="top"><a id="a251f0ef6521c45cf89b0e44064b38854"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a251f0ef6521c45cf89b0e44064b38854">targetMBPerSec</a> = START_MB_PER_SEC</td></tr>
<tr class="memdesc:a251f0ef6521c45cf89b0e44064b38854"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current IO writes throttle rate. <br /></td></tr>
<tr class="separator:a251f0ef6521c45cf89b0e44064b38854"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler')"><img src="../../closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html">org.apache.lucene.index.MergeScheduler</a></td></tr>
<tr class="memitem:a8a86019eb91ba1d75bb3c74cdc1eb2ae inherit pro_attribs_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="memItemLeft" align="right" valign="top"><a id="a8a86019eb91ba1d75bb3c74cdc1eb2ae"></a>
<a class="el" href="../../dd/d43/classorg_1_1apache_1_1lucene_1_1util_1_1_info_stream.html">InfoStream</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html#a8a86019eb91ba1d75bb3c74cdc1eb2ae">infoStream</a></td></tr>
<tr class="memdesc:a8a86019eb91ba1d75bb3c74cdc1eb2ae inherit pro_attribs_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="mdescLeft">&#160;</td><td class="mdescRight">For messages about merge scheduling. <br /></td></tr>
<tr class="separator:a8a86019eb91ba1d75bb3c74cdc1eb2ae inherit pro_attribs_classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A <a class="el" href="../../d1/d4e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_scheduler.html">MergeScheduler</a> that runs each merge using a separate thread. </p>
<p>Specify the max number of threads that may run at once, and the maximum number of simultaneous merges with <a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#afe3252f24171c6057c54a9db0e3c164f">setMaxMergesAndThreads</a>.</p>
<p>If the number of merges exceeds the max number of threads then the largest merges are paused until one of the smaller merges completes.</p>
<p>If more than <a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#acdddd99678b9e1c6200b247c60397167">getMaxMergeCount</a> merges are requested then this class will forcefully throttle the incoming threads by pausing until one more more merges complete.</p>
<p>This class attempts to detect whether the index is on rotational storage (traditional hard drive) or not (e.g. solid-state disk) and changes the default max merge and thread count accordingly. This detection is currently Linux-only, and relies on the OS to put the right value into /sys/block/&lt;dev&gt;/block/rotational. For all other operating systems it currently assumes a rotational disk for backwards compatibility. To enable default settings for spinning or solid state disks for such operating systems, use <a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#aad38ede9b8ebafe9b86426f67a45a5f8">setDefaultMaxMergesAndThreads(boolean)</a>. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="adf17320b8c51a277050ae5717148deaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf17320b8c51a277050ae5717148deaa">&#9670;&nbsp;</a></span>ConcurrentMergeScheduler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">org.apache.lucene.index.ConcurrentMergeScheduler.ConcurrentMergeScheduler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sole constructor, with all settings set to default values. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4e7b21600dce4b4572df88d62c6a65fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e7b21600dce4b4572df88d62c6a65fc">&#9670;&nbsp;</a></span>disableAutoIOThrottle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized void org.apache.lucene.index.ConcurrentMergeScheduler.disableAutoIOThrottle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn off auto IO throttling. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#abeba467437f8ea7083dd62adb930e8f7" title="Turn on dynamic IO throttling, to adaptively rate limit writes bytes/sec to the minimal rate necessar...">enableAutoIOThrottle</a> </dd></dl>

</div>
</div>
<a id="a9cdd03d4ab0e0792a91d896626bcc604"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cdd03d4ab0e0792a91d896626bcc604">&#9670;&nbsp;</a></span>doStall()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">synchronized void org.apache.lucene.index.ConcurrentMergeScheduler.doStall </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called from <a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a5ae08627b40a76b42fd706007060ff7f">maybeStall</a> to pause the calling thread for a bit. </p>

</div>
</div>
<a id="abeba467437f8ea7083dd62adb930e8f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeba467437f8ea7083dd62adb930e8f7">&#9670;&nbsp;</a></span>enableAutoIOThrottle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized void org.apache.lucene.index.ConcurrentMergeScheduler.enableAutoIOThrottle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn on dynamic IO throttling, to adaptively rate limit writes bytes/sec to the minimal rate necessary so merges do not fall behind. </p>
<p>By default this is enabled. </p>

</div>
</div>
<a id="a3459271e155a7cc5514dd737c91a0e6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3459271e155a7cc5514dd737c91a0e6a">&#9670;&nbsp;</a></span>getAutoIOThrottle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized boolean org.apache.lucene.index.ConcurrentMergeScheduler.getAutoIOThrottle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if auto IO throttling is currently enabled. </p>

</div>
</div>
<a id="af2f55660529b7cf963f98084be01ffcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2f55660529b7cf963f98084be01ffcb">&#9670;&nbsp;</a></span>getForceMergeMBPerSec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized double org.apache.lucene.index.ConcurrentMergeScheduler.getForceMergeMBPerSec </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the per-merge IO throttle rate for forced merges. </p>

</div>
</div>
<a id="a12367e735008a6285df46d63fb34d41a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12367e735008a6285df46d63fb34d41a">&#9670;&nbsp;</a></span>getIORateLimitMBPerSec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized double org.apache.lucene.index.ConcurrentMergeScheduler.getIORateLimitMBPerSec </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the currently set per-merge IO writes rate limit, if <a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#abeba467437f8ea7083dd62adb930e8f7">enableAutoIOThrottle</a> was called, else. </p>
<div class="fragment"><div class="line">Double.POSITIVE_INFINITY </div></div><!-- fragment --><p> . </p>

</div>
</div>
<a id="acdddd99678b9e1c6200b247c60397167"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdddd99678b9e1c6200b247c60397167">&#9670;&nbsp;</a></span>getMaxMergeCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized int org.apache.lucene.index.ConcurrentMergeScheduler.getMaxMergeCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>See <a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#afe3252f24171c6057c54a9db0e3c164f">setMaxMergesAndThreads</a>. </p>

</div>
</div>
<a id="a893accfb17230c8a9e988fee0e3fa605"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a893accfb17230c8a9e988fee0e3fa605">&#9670;&nbsp;</a></span>getMaxThreadCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized int org.apache.lucene.index.ConcurrentMergeScheduler.getMaxThreadCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns. </p>
<div class="fragment"><div class="line">maxThreadCount </div></div><!-- fragment --><p> .</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#afe3252f24171c6057c54a9db0e3c164f" title="Expert: directly set the maximum number of merge threads and simultaneous merges allowed. ">setMaxMergesAndThreads(int, int)</a> </dd></dl>

</div>
</div>
<a id="a5ae08627b40a76b42fd706007060ff7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ae08627b40a76b42fd706007060ff7f">&#9670;&nbsp;</a></span>maybeStall()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">synchronized boolean org.apache.lucene.index.ConcurrentMergeScheduler.maybeStall </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/dbc/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer.html">IndexWriter</a>&#160;</td>
          <td class="paramname"><em>writer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is invoked by <a class="el" href="../../">merge</a> to possibly stall the incoming thread when there are too many merges running or pending. </p>
<p>The default behavior is to force this thread, which is producing too many segments for merging to keep up, to wait until merges catch up. Applications that can take other less drastic measures, such as limiting how many threads are allowed to index, can do nothing here and throttle elsewhere.</p>
<p>If this method wants to stall but the calling thread is a merge thread, it should return false to tell caller not to kick off any new merges. </p>

</div>
</div>
<a id="ac66dd05997dc449229a9d2daf8f4ed03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac66dd05997dc449229a9d2daf8f4ed03">&#9670;&nbsp;</a></span>mergeThreadCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized int org.apache.lucene.index.ConcurrentMergeScheduler.mergeThreadCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the number of merge threads that are alive, ignoring the calling thread if it is a merge thread. </p>
<p>Note that this number is &le; <a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html#a843496fc86f6881bed4131a226b8bba4">mergeThreads</a> size.</p>
<p>.internal </p>

</div>
</div>
<a id="aad38ede9b8ebafe9b86426f67a45a5f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad38ede9b8ebafe9b86426f67a45a5f8">&#9670;&nbsp;</a></span>setDefaultMaxMergesAndThreads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized void org.apache.lucene.index.ConcurrentMergeScheduler.setDefaultMaxMergesAndThreads </td>
          <td>(</td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>spins</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets max merges and threads to proper defaults for rotational or non-rotational storage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spins</td><td>true to set defaults best for traditional rotatational storage (spinning disks), else false (e.g. for solid-state disks) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9a9657f9d3eee6a044c1d8b9804538b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a9657f9d3eee6a044c1d8b9804538b1">&#9670;&nbsp;</a></span>setForceMergeMBPerSec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized void org.apache.lucene.index.ConcurrentMergeScheduler.setForceMergeMBPerSec </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the per-merge IO throttle rate for forced merges (default: </p>
<div class="fragment"><div class="line">Double.POSITIVE_INFINITY </div></div><!-- fragment --><p> ). </p>

</div>
</div>
<a id="afe3252f24171c6057c54a9db0e3c164f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe3252f24171c6057c54a9db0e3c164f">&#9670;&nbsp;</a></span>setMaxMergesAndThreads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized void org.apache.lucene.index.ConcurrentMergeScheduler.setMaxMergesAndThreads </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxMergeCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxThreadCount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Expert: directly set the maximum number of merge threads and simultaneous merges allowed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">maxMergeCount</td><td>the max # simultaneous merges that are allowed. If a merge is necessary yet we already have this many threads running, the incoming thread (that is calling add/updateDocument) will block until a merge thread has completed. Note that we will only run the smallest <code>maxThreadCount</code> merges at a time. </td></tr>
    <tr><td class="paramname">maxThreadCount</td><td>the max # simultaneous merge threads that should be running at once. This must be &lt;= <code>maxMergeCount</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0b4d27b226e65f76a99e147abe148687"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b4d27b226e65f76a99e147abe148687">&#9670;&nbsp;</a></span>sync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.apache.lucene.index.ConcurrentMergeScheduler.sync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for any running merge threads to finish. </p>
<p>This call is not interruptible as used by <a class="el" href="../../">close()</a>. </p>

</div>
</div>
<a id="a92c3aaa683ee4e0680fa2dbb4a94a2c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92c3aaa683ee4e0680fa2dbb4a94a2c2">&#9670;&nbsp;</a></span>targetMBPerSecChanged()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void org.apache.lucene.index.ConcurrentMergeScheduler.targetMBPerSecChanged </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Subclass can override to tweak targetMBPerSec. </p>

</div>
</div>
<a id="a31790e5139d99dbd3caa8ceb2089c3ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31790e5139d99dbd3caa8ceb2089c3ee">&#9670;&nbsp;</a></span>updateMergeThreads()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">synchronized void org.apache.lucene.index.ConcurrentMergeScheduler.updateMergeThreads </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called whenever the running merges have changed, to set merge IO limits. </p>
<p>This method sorts the merge threads by their merge size in descending order and then pauses/unpauses threads from first to last &ndash; that way, smaller merges are guaranteed to run before larger ones. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a682342aa2262dc71e39a267922d7568d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a682342aa2262dc71e39a267922d7568d">&#9670;&nbsp;</a></span>AUTO_DETECT_MERGES_AND_THREADS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final int org.apache.lucene.index.ConcurrentMergeScheduler.AUTO_DETECT_MERGES_AND_THREADS = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Dynamic default for. </p>
<div class="fragment"><div class="line">maxThreadCount </div></div><!-- fragment --><p> and</p><div class="fragment"><div class="line">maxMergeCount </div></div><!-- fragment --><p> , used to detect whether the index is backed by an SSD or rotational disk and set</p><div class="fragment"><div class="line">maxThreadCount </div></div><!-- fragment --><p> accordingly. If it's an SSD, </p><div class="fragment"><div class="line">maxThreadCount </div></div><!-- fragment --><p> is set to</p><div class="fragment"><div class="line">max(1, min(4, cpuCoreCount/2)) </div></div><!-- fragment --><p> , otherwise 1. Note that detection only currently works on Linux; other platforms will assume the index is not on an SSD. </p>

</div>
</div>
<a id="aa7225a9086b818a2bb5b4adc5cb2b604"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7225a9086b818a2bb5b4adc5cb2b604">&#9670;&nbsp;</a></span>DEFAULT_CPU_CORE_COUNT_PROPERTY</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final String org.apache.lucene.index.ConcurrentMergeScheduler.DEFAULT_CPU_CORE_COUNT_PROPERTY = &quot;lucene.cms.override_core_count&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used for testing. </p>
<p>.internal </p>

</div>
</div>
<a id="a5a2baf5df84008134101839765b3b472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a2baf5df84008134101839765b3b472">&#9670;&nbsp;</a></span>DEFAULT_SPINS_PROPERTY</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final String org.apache.lucene.index.ConcurrentMergeScheduler.DEFAULT_SPINS_PROPERTY = &quot;lucene.cms.override_spins&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used for testing. </p>
<p>.internal </p>

</div>
</div>
<a id="a77e4db8be620637399baa6571b55a7a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77e4db8be620637399baa6571b55a7a4">&#9670;&nbsp;</a></span>mergeThreadCount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int org.apache.lucene.index.ConcurrentMergeScheduler.mergeThreadCount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>How many <a class="el" href="../../d7/d2f/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler_1_1_merge_thread.html">MergeThread</a>s have kicked off (this is use to name them). </p>

</div>
</div>
<a id="a843496fc86f6881bed4131a226b8bba4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a843496fc86f6881bed4131a226b8bba4">&#9670;&nbsp;</a></span>mergeThreads</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final List&lt;<a class="el" href="../../d7/d2f/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler_1_1_merge_thread.html">MergeThread</a>&gt; org.apache.lucene.index.ConcurrentMergeScheduler.mergeThreads = new ArrayList&lt;&gt;()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>List of currently active <a class="el" href="../../d7/d2f/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler_1_1_merge_thread.html">MergeThread</a>s. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/Users/vkroz/src/oss/lucene-solr/lucene/core/src/java/org/apache/lucene/index/ConcurrentMergeScheduler.java</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>org</b></li><li class="navelem"><b>apache</b></li><li class="navelem"><a class="el" href="../../d8/d76/namespaceorg_1_1apache_1_1lucene.html">lucene</a></li><li class="navelem"><a class="el" href="../../d2/d12/namespaceorg_1_1apache_1_1lucene_1_1index.html">index</a></li><li class="navelem"><a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html">ConcurrentMergeScheduler</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
