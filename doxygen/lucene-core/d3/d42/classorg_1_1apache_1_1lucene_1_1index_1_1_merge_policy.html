<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lucene-core-API: org.apache.lucene.index.MergePolicy Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Lucene-core-API
   &#160;<span id="projectnumber">8.0.0-SNAPSHOT</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="../../d3/d6e/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">org.apache.lucene.index.MergePolicy Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for org.apache.lucene.index.MergePolicy:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/dab/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy__inherit__graph.png" border="0" usemap="#org_8apache_8lucene_8index_8_merge_policy_inherit__map" alt="Inheritance graph"/></div>
<map name="org_8apache_8lucene_8index_8_merge_policy_inherit__map" id="org_8apache_8lucene_8index_8_merge_policy_inherit__map">
<area shape="rect" id="node2" href="../../d5/d8a/classorg_1_1apache_1_1lucene_1_1index_1_1_filter_merge_policy.html" title="A wrapper for MergePolicy instances. " alt="" coords="224,71,395,112"/>
<area shape="rect" id="node6" href="../../da/d43/classorg_1_1apache_1_1lucene_1_1index_1_1_log_merge_policy.html" title="org.apache.lucene.index.\lLogMergePolicy" alt="" coords="224,136,395,177"/>
<area shape="rect" id="node9" href="../../de/d3a/classorg_1_1apache_1_1lucene_1_1index_1_1_no_merge_policy.html" title="A MergePolicy which never returns merges to execute. " alt="" coords="224,201,395,243"/>
<area shape="rect" id="node10" href="../../d0/d5d/classorg_1_1apache_1_1lucene_1_1index_1_1_tiered_merge_policy.html" title="Merges segments of approximately equal size, subject to an allowed number of segments per tier..." alt="" coords="224,267,395,308"/>
<area shape="rect" id="node3" href="../../dc/d16/classorg_1_1apache_1_1lucene_1_1index_1_1_one_merge_wrapping_merge_policy.html" title="A wrapping merge policy that wraps the org.apache.lucene.index.MergePolicy.OneMerge objects returned ..." alt="" coords="443,5,659,47"/>
<area shape="rect" id="node5" href="../../df/da9/classorg_1_1apache_1_1lucene_1_1index_1_1_upgrade_index_merge_policy.html" title="This MergePolicy is used for upgrading all existing segments of an index when calling IndexWriter#for..." alt="" coords="461,71,640,112"/>
<area shape="rect" id="node4" href="../../d5/d16/classorg_1_1apache_1_1lucene_1_1index_1_1_soft_deletes_retention_merge_policy.html" title="This MergePolicy allows to carry over soft deleted documents across merges. " alt="" coords="707,5,928,47"/>
<area shape="rect" id="node7" href="../../d6/d60/classorg_1_1apache_1_1lucene_1_1index_1_1_log_byte_size_merge_policy.html" title="This is a LogMergePolicy that measures size of a segment as the total byte size of the segment&#39;s file..." alt="" coords="465,136,636,177"/>
<area shape="rect" id="node8" href="../../df/d0f/classorg_1_1apache_1_1lucene_1_1index_1_1_log_doc_merge_policy.html" title="This is a LogMergePolicy that measures size of a segment as the number of documents (not taking delet..." alt="" coords="465,201,636,243"/>
</map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>MergeAbortedException</b></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thrown when a merge was explicitly aborted because <a class="el" href="../../">IndexWriter#abortMerges</a> was called. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html">MergeContext</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This interface represents the current context of the merge selection process.  <a href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>MergeException</b></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exception thrown if there are any problems while executing a merge. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>MergeSpecification</b></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A MergeSpecification instance provides the information necessary to perform multiple merges. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>OneMerge</b></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">OneMerge provides the information necessary to perform an individual primitive merge operation, resulting in a single new segment. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>OneMergeProgress</b></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Progress and state for an executing merge. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aad1a022c2d54ccfbe5276eebbab10396"><td class="memItemLeft" align="right" valign="top"><a id="aad1a022c2d54ccfbe5276eebbab10396"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#aad1a022c2d54ccfbe5276eebbab10396">MergePolicy</a> ()</td></tr>
<tr class="memdesc:aad1a022c2d54ccfbe5276eebbab10396"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new merge policy instance. <br /></td></tr>
<tr class="separator:aad1a022c2d54ccfbe5276eebbab10396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43de271663913ac98826e6a624a29769"><td class="memItemLeft" align="right" valign="top">abstract MergeSpecification&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a43de271663913ac98826e6a624a29769">findMerges</a> (<a class="el" href="../../dd/dd6/enumorg_1_1apache_1_1lucene_1_1index_1_1_merge_trigger.html">MergeTrigger</a> mergeTrigger, <a class="el" href="../../d7/dd4/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_infos.html">SegmentInfos</a> segmentInfos, <a class="el" href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html">MergeContext</a> mergeContext)  throws IOException</td></tr>
<tr class="memdesc:a43de271663913ac98826e6a624a29769"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine what set of merge operations are now necessary on the index.  <a href="#a43de271663913ac98826e6a624a29769">More...</a><br /></td></tr>
<tr class="separator:a43de271663913ac98826e6a624a29769"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4128ff62c94f999fa6aa4639cad6f298"><td class="memItemLeft" align="right" valign="top">abstract MergeSpecification&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a4128ff62c94f999fa6aa4639cad6f298">findForcedMerges</a> (<a class="el" href="../../d7/dd4/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_infos.html">SegmentInfos</a> segmentInfos, int maxSegmentCount, Map&lt; <a class="el" href="../../d3/df8/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_commit_info.html">SegmentCommitInfo</a>, Boolean &gt; segmentsToMerge, <a class="el" href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html">MergeContext</a> mergeContext)  throws IOException</td></tr>
<tr class="memdesc:a4128ff62c94f999fa6aa4639cad6f298"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine what set of merge operations is necessary in order to merge to.  <a href="#a4128ff62c94f999fa6aa4639cad6f298">More...</a><br /></td></tr>
<tr class="separator:a4128ff62c94f999fa6aa4639cad6f298"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a515d2a52956474fe03904b98441a15e3"><td class="memItemLeft" align="right" valign="top">abstract MergeSpecification&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a515d2a52956474fe03904b98441a15e3">findForcedDeletesMerges</a> (<a class="el" href="../../d7/dd4/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_infos.html">SegmentInfos</a> segmentInfos, <a class="el" href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html">MergeContext</a> mergeContext)  throws IOException</td></tr>
<tr class="memdesc:a515d2a52956474fe03904b98441a15e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine what set of merge operations is necessary in order to expunge all deletes from the index.  <a href="#a515d2a52956474fe03904b98441a15e3">More...</a><br /></td></tr>
<tr class="separator:a515d2a52956474fe03904b98441a15e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a860edc0b0f598ea80602d2d9cc9ad1e6"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a860edc0b0f598ea80602d2d9cc9ad1e6">useCompoundFile</a> (<a class="el" href="../../d7/dd4/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_infos.html">SegmentInfos</a> infos, <a class="el" href="../../d3/df8/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_commit_info.html">SegmentCommitInfo</a> mergedInfo, <a class="el" href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html">MergeContext</a> mergeContext)  throws IOException </td></tr>
<tr class="memdesc:a860edc0b0f598ea80602d2d9cc9ad1e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if a new segment (regardless of its origin) should use the compound file format.  <a href="#a860edc0b0f598ea80602d2d9cc9ad1e6">More...</a><br /></td></tr>
<tr class="separator:a860edc0b0f598ea80602d2d9cc9ad1e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f7b62c389429c6503ec5e20ce0e66de"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a5f7b62c389429c6503ec5e20ce0e66de">getNoCFSRatio</a> ()</td></tr>
<tr class="memdesc:a5f7b62c389429c6503ec5e20ce0e66de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns current.  <a href="#a5f7b62c389429c6503ec5e20ce0e66de">More...</a><br /></td></tr>
<tr class="separator:a5f7b62c389429c6503ec5e20ce0e66de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d302f81a00b81a30f11857b3dc251ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a9d302f81a00b81a30f11857b3dc251ed">setNoCFSRatio</a> (double <a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a48aca158f2feb6c6a64bb5b5de1d52fb">noCFSRatio</a>)</td></tr>
<tr class="memdesc:a9d302f81a00b81a30f11857b3dc251ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">If a merged segment will be more than this percentage of the total size of the index, leave the segment as non-compound file even if compound file is enabled.  <a href="#a9d302f81a00b81a30f11857b3dc251ed">More...</a><br /></td></tr>
<tr class="separator:a9d302f81a00b81a30f11857b3dc251ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb540cb273f6e238ac9d8272b09762ac"><td class="memItemLeft" align="right" valign="top"><a id="adb540cb273f6e238ac9d8272b09762ac"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#adb540cb273f6e238ac9d8272b09762ac">getMaxCFSSegmentSizeMB</a> ()</td></tr>
<tr class="memdesc:adb540cb273f6e238ac9d8272b09762ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the largest size allowed for a compound file segment. <br /></td></tr>
<tr class="separator:adb540cb273f6e238ac9d8272b09762ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a5b1aa181d6e8e8a33aaca366634688"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a8a5b1aa181d6e8e8a33aaca366634688">setMaxCFSSegmentSizeMB</a> (double v)</td></tr>
<tr class="memdesc:a8a5b1aa181d6e8e8a33aaca366634688"><td class="mdescLeft">&#160;</td><td class="mdescRight">If a merged segment will be more than this value, leave the segment as non-compound file even if compound file is enabled.  <a href="#a8a5b1aa181d6e8e8a33aaca366634688">More...</a><br /></td></tr>
<tr class="separator:a8a5b1aa181d6e8e8a33aaca366634688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5ea891051aec7617ac9a7ca79991669"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#ae5ea891051aec7617ac9a7ca79991669">keepFullyDeletedSegment</a> (<a class="el" href="../../d7/d76/interfaceorg_1_1apache_1_1lucene_1_1util_1_1_i_o_supplier.html">IOSupplier</a>&lt; <a class="el" href="../../d7/deb/classorg_1_1apache_1_1lucene_1_1index_1_1_codec_reader.html">CodecReader</a> &gt; readerIOSupplier)  throws IOException </td></tr>
<tr class="memdesc:ae5ea891051aec7617ac9a7ca79991669"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the segment represented by the given <a class="el" href="../../d7/deb/classorg_1_1apache_1_1lucene_1_1index_1_1_codec_reader.html" title="LeafReader implemented by codec APIs. ">CodecReader</a> should be keep even if it's fully deleted.  <a href="#ae5ea891051aec7617ac9a7ca79991669">More...</a><br /></td></tr>
<tr class="separator:ae5ea891051aec7617ac9a7ca79991669"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa2933bf91f60a20fc4cf406bbef7223"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#afa2933bf91f60a20fc4cf406bbef7223">numDeletesToMerge</a> (<a class="el" href="../../d3/df8/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_commit_info.html">SegmentCommitInfo</a> info, int delCount, <a class="el" href="../../d7/d76/interfaceorg_1_1apache_1_1lucene_1_1util_1_1_i_o_supplier.html">IOSupplier</a>&lt; <a class="el" href="../../d7/deb/classorg_1_1apache_1_1lucene_1_1index_1_1_codec_reader.html">CodecReader</a> &gt; readerSupplier)  throws IOException </td></tr>
<tr class="memdesc:afa2933bf91f60a20fc4cf406bbef7223"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of deletes that a merge would claim on the given segment.  <a href="#afa2933bf91f60a20fc4cf406bbef7223">More...</a><br /></td></tr>
<tr class="separator:afa2933bf91f60a20fc4cf406bbef7223"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a86746c71a486d957ec391ecfaf5009e3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a86746c71a486d957ec391ecfaf5009e3">MergePolicy</a> (double defaultNoCFSRatio, long defaultMaxCFSSegmentSize)</td></tr>
<tr class="memdesc:a86746c71a486d957ec391ecfaf5009e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new merge policy instance with default settings for noCFSRatio and maxCFSSegmentSize.  <a href="#a86746c71a486d957ec391ecfaf5009e3">More...</a><br /></td></tr>
<tr class="separator:a86746c71a486d957ec391ecfaf5009e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ebb41c1e60781baa4520e401a413f01"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a9ebb41c1e60781baa4520e401a413f01">size</a> (<a class="el" href="../../d3/df8/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_commit_info.html">SegmentCommitInfo</a> info, <a class="el" href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html">MergeContext</a> mergeContext)  throws IOException </td></tr>
<tr class="memdesc:a9ebb41c1e60781baa4520e401a413f01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the byte size of the provided <a class="el" href="../../d3/df8/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_commit_info.html">SegmentCommitInfo</a>, pro-rated by percentage of non-deleted documents is set.  <a href="#a9ebb41c1e60781baa4520e401a413f01">More...</a><br /></td></tr>
<tr class="separator:a9ebb41c1e60781baa4520e401a413f01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acef8f1bd18bec9cfed08a5ca2ffb0acd"><td class="memItemLeft" align="right" valign="top"><a id="acef8f1bd18bec9cfed08a5ca2ffb0acd"></a>
final boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#acef8f1bd18bec9cfed08a5ca2ffb0acd">assertDelCount</a> (int delCount, <a class="el" href="../../d3/df8/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_commit_info.html">SegmentCommitInfo</a> info)</td></tr>
<tr class="memdesc:acef8f1bd18bec9cfed08a5ca2ffb0acd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asserts that the delCount for this <a class="el" href="../../d3/df8/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_commit_info.html" title="Embeds a [read-only] SegmentInfo and adds per-commit fields. ">SegmentCommitInfo</a> is valid. <br /></td></tr>
<tr class="separator:acef8f1bd18bec9cfed08a5ca2ffb0acd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2b4d1aab7a5d5e6dfff82eb9ad4a79d"><td class="memItemLeft" align="right" valign="top"><a id="af2b4d1aab7a5d5e6dfff82eb9ad4a79d"></a>
final boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#af2b4d1aab7a5d5e6dfff82eb9ad4a79d">isMerged</a> (<a class="el" href="../../d7/dd4/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_infos.html">SegmentInfos</a> infos, <a class="el" href="../../d3/df8/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_commit_info.html">SegmentCommitInfo</a> info, <a class="el" href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html">MergeContext</a> mergeContext)  throws IOException </td></tr>
<tr class="memdesc:af2b4d1aab7a5d5e6dfff82eb9ad4a79d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if this single info is already fully merged (has no pending deletes, is in the same dir as the writer, and matches the current compound file setting. <br /></td></tr>
<tr class="separator:af2b4d1aab7a5d5e6dfff82eb9ad4a79d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0db5c7d0977aac0f51c519c5ae6acc05"><td class="memItemLeft" align="right" valign="top"><a id="a0db5c7d0977aac0f51c519c5ae6acc05"></a>
final String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a0db5c7d0977aac0f51c519c5ae6acc05">segString</a> (<a class="el" href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html">MergeContext</a> mergeContext, Iterable&lt; <a class="el" href="../../d3/df8/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_commit_info.html">SegmentCommitInfo</a> &gt; infos)</td></tr>
<tr class="memdesc:a0db5c7d0977aac0f51c519c5ae6acc05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds a String representation of the given <a class="el" href="../../d3/df8/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_commit_info.html" title="Embeds a [read-only] SegmentInfo and adds per-commit fields. ">SegmentCommitInfo</a> instances. <br /></td></tr>
<tr class="separator:a0db5c7d0977aac0f51c519c5ae6acc05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff87fc271c4810c7a572a5cc465a3f8d"><td class="memItemLeft" align="right" valign="top">final void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#aff87fc271c4810c7a572a5cc465a3f8d">message</a> (String message, <a class="el" href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html">MergeContext</a> mergeContext)</td></tr>
<tr class="memdesc:aff87fc271c4810c7a572a5cc465a3f8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print a debug message to <a class="el" href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html">MergeContext</a>'s.  <a href="#aff87fc271c4810c7a572a5cc465a3f8d">More...</a><br /></td></tr>
<tr class="separator:aff87fc271c4810c7a572a5cc465a3f8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae29240d9b3353d55b12acc96b5f1ac48"><td class="memItemLeft" align="right" valign="top">final boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#ae29240d9b3353d55b12acc96b5f1ac48">verbose</a> (<a class="el" href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html">MergeContext</a> mergeContext)</td></tr>
<tr class="memdesc:ae29240d9b3353d55b12acc96b5f1ac48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns <code>true</code> if the info-stream is in verbose mode.  <a href="#ae29240d9b3353d55b12acc96b5f1ac48">More...</a><br /></td></tr>
<tr class="separator:ae29240d9b3353d55b12acc96b5f1ac48"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a48aca158f2feb6c6a64bb5b5de1d52fb"><td class="memItemLeft" align="right" valign="top"><a id="a48aca158f2feb6c6a64bb5b5de1d52fb"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a48aca158f2feb6c6a64bb5b5de1d52fb">noCFSRatio</a> = <a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a8726975b690fd23559a1f3a57de9caa6">DEFAULT_NO_CFS_RATIO</a></td></tr>
<tr class="memdesc:a48aca158f2feb6c6a64bb5b5de1d52fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the size of the merge segment exceeds this ratio of the total index size then it will remain in non-compound format. <br /></td></tr>
<tr class="separator:a48aca158f2feb6c6a64bb5b5de1d52fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeff9512d7b80ce5c537a55151c693f6e"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#aeff9512d7b80ce5c537a55151c693f6e">maxCFSSegmentSize</a> = <a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a2c96e6ab195ad84ce9f7ceee20de89a7">DEFAULT_MAX_CFS_SEGMENT_SIZE</a></td></tr>
<tr class="memdesc:aeff9512d7b80ce5c537a55151c693f6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the size of the merged segment exceeds this value then it will not use compound file format.  <a href="#aeff9512d7b80ce5c537a55151c693f6e">More...</a><br /></td></tr>
<tr class="separator:aeff9512d7b80ce5c537a55151c693f6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a8726975b690fd23559a1f3a57de9caa6"><td class="memItemLeft" align="right" valign="top">static final double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a8726975b690fd23559a1f3a57de9caa6">DEFAULT_NO_CFS_RATIO</a> = 1.0</td></tr>
<tr class="memdesc:a8726975b690fd23559a1f3a57de9caa6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default ratio for compound file system usage.  <a href="#a8726975b690fd23559a1f3a57de9caa6">More...</a><br /></td></tr>
<tr class="separator:a8726975b690fd23559a1f3a57de9caa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c96e6ab195ad84ce9f7ceee20de89a7"><td class="memItemLeft" align="right" valign="top">static final long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a2c96e6ab195ad84ce9f7ceee20de89a7">DEFAULT_MAX_CFS_SEGMENT_SIZE</a> = Long.MAX_VALUE</td></tr>
<tr class="memdesc:a2c96e6ab195ad84ce9f7ceee20de89a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default max segment size in order to use compound file system.  <a href="#a2c96e6ab195ad84ce9f7ceee20de89a7">More...</a><br /></td></tr>
<tr class="separator:a2c96e6ab195ad84ce9f7ceee20de89a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Expert: a <a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html">MergePolicy</a> determines the sequence of primitive merge operations.</p>
<p>Whenever the segments in an index have been altered by <a class="el" href="../../df/dbc/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer.html">IndexWriter</a>, either the addition of a newly flushed segment, addition of many segments from addIndexes* calls, or a previous merge that may now need to cascade, <a class="el" href="../../df/dbc/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer.html">IndexWriter</a> invokes <a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a43de271663913ac98826e6a624a29769">findMerges</a> to give the <a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html">MergePolicy</a> a chance to pick merges that are now required. This method returns a <a class="el" href="../../">MergeSpecification</a> instance describing the set of merges that should be done, or null if no merges are necessary. When <a class="el" href="../../df/dbc/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer.html#ad43c2e7d16d5d9e3a41e50a05316f0e5" title="Forces merge policy to merge segments until there are. ">IndexWriter.forceMerge</a> is called, it calls <a class="el" href="../../">findForcedMerges(SegmentInfos, int, Map, MergeContext)</a> and the <a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html">MergePolicy</a> should then return the necessary merges.</p>
<p>Note that the policy can return more than one merge at a time. In this case, if the writer is using <a class="el" href="../../d9/d72/classorg_1_1apache_1_1lucene_1_1index_1_1_serial_merge_scheduler.html">SerialMergeScheduler</a>, the merges will be run sequentially but if it is using <a class="el" href="../../d3/d57/classorg_1_1apache_1_1lucene_1_1index_1_1_concurrent_merge_scheduler.html">ConcurrentMergeScheduler</a> they will be run concurrently.</p>
<p>The default <a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html">MergePolicy</a> is <a class="el" href="../../d0/d5d/classorg_1_1apache_1_1lucene_1_1index_1_1_tiered_merge_policy.html">TieredMergePolicy</a>.</p>
<p>.experimental </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a86746c71a486d957ec391ecfaf5009e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86746c71a486d957ec391ecfaf5009e3">&#9670;&nbsp;</a></span>MergePolicy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">org.apache.lucene.index.MergePolicy.MergePolicy </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>defaultNoCFSRatio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>defaultMaxCFSSegmentSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new merge policy instance with default settings for noCFSRatio and maxCFSSegmentSize. </p>
<p>This ctor should be used by subclasses using different defaults than the <a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html">MergePolicy</a> </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a515d2a52956474fe03904b98441a15e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a515d2a52956474fe03904b98441a15e3">&#9670;&nbsp;</a></span>findForcedDeletesMerges()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract MergeSpecification org.apache.lucene.index.MergePolicy.findForcedDeletesMerges </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/dd4/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_infos.html">SegmentInfos</a>&#160;</td>
          <td class="paramname"><em>segmentInfos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html">MergeContext</a>&#160;</td>
          <td class="paramname"><em>mergeContext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws IOException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine what set of merge operations is necessary in order to expunge all deletes from the index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">segmentInfos</td><td>the total set of segments in the index </td></tr>
    <tr><td class="paramname">mergeContext</td><td>the <a class="el" href="../../df/dbc/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer.html" title="An IndexWriter creates and maintains an index. ">IndexWriter</a> to find the merges on </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4128ff62c94f999fa6aa4639cad6f298"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4128ff62c94f999fa6aa4639cad6f298">&#9670;&nbsp;</a></span>findForcedMerges()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract MergeSpecification org.apache.lucene.index.MergePolicy.findForcedMerges </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/dd4/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_infos.html">SegmentInfos</a>&#160;</td>
          <td class="paramname"><em>segmentInfos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxSegmentCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Map&lt; <a class="el" href="../../d3/df8/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_commit_info.html">SegmentCommitInfo</a>, Boolean &gt;&#160;</td>
          <td class="paramname"><em>segmentsToMerge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html">MergeContext</a>&#160;</td>
          <td class="paramname"><em>mergeContext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws IOException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine what set of merge operations is necessary in order to merge to. </p>
<div class="fragment"><div class="line">&lt;= </div></div><!-- fragment --><p> the specified segment count. <a class="el" href="../../df/dbc/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer.html">IndexWriter</a> calls this when its <a class="el" href="../../df/dbc/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer.html#ad43c2e7d16d5d9e3a41e50a05316f0e5">IndexWriter#forceMerge</a> method is called. This call is always synchronized on the <a class="el" href="../../df/dbc/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer.html">IndexWriter</a> instance so only one thread at a time will call this method. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">segmentInfos</td><td>the total set of segments in the index </td></tr>
    <tr><td class="paramname">maxSegmentCount</td><td>requested maximum number of segments in the index (currently this is always 1) </td></tr>
    <tr><td class="paramname">segmentsToMerge</td><td>contains the specific <a class="el" href="../../d2/d9b/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_info.html" title="Information about a segment such as its name, directory, and files related to the segment...">SegmentInfo</a> instances that must be merged away. This may be a subset of all <a class="el" href="../../d7/dd4/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_infos.html" title="A collection of segmentInfo objects with methods for operating on those segments in relation to the f...">SegmentInfos</a>. If the value is True for a given <a class="el" href="../../d2/d9b/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_info.html" title="Information about a segment such as its name, directory, and files related to the segment...">SegmentInfo</a>, that means this segment was an original segment present in the to-be-merged index; else, it was a segment produced by a cascaded merge. </td></tr>
    <tr><td class="paramname">mergeContext</td><td>the <a class="el" href="../../df/dbc/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer.html" title="An IndexWriter creates and maintains an index. ">IndexWriter</a> to find the merges on </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a43de271663913ac98826e6a624a29769"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43de271663913ac98826e6a624a29769">&#9670;&nbsp;</a></span>findMerges()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract MergeSpecification org.apache.lucene.index.MergePolicy.findMerges </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/dd6/enumorg_1_1apache_1_1lucene_1_1index_1_1_merge_trigger.html">MergeTrigger</a>&#160;</td>
          <td class="paramname"><em>mergeTrigger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/dd4/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_infos.html">SegmentInfos</a>&#160;</td>
          <td class="paramname"><em>segmentInfos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html">MergeContext</a>&#160;</td>
          <td class="paramname"><em>mergeContext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws IOException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine what set of merge operations are now necessary on the index. </p>
<p><a class="el" href="../../df/dbc/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer.html">IndexWriter</a> calls this whenever there is a change to the segments. This call is always synchronized on the <a class="el" href="../../df/dbc/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer.html">IndexWriter</a> instance so only one thread at a time will call this method. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mergeTrigger</td><td>the event that triggered the merge </td></tr>
    <tr><td class="paramname">segmentInfos</td><td>the total set of segments in the index </td></tr>
    <tr><td class="paramname">mergeContext</td><td>the <a class="el" href="../../df/dbc/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer.html" title="An IndexWriter creates and maintains an index. ">IndexWriter</a> to find the merges on </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5f7b62c389429c6503ec5e20ce0e66de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f7b62c389429c6503ec5e20ce0e66de">&#9670;&nbsp;</a></span>getNoCFSRatio()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double org.apache.lucene.index.MergePolicy.getNoCFSRatio </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns current. </p>
<div class="fragment"><div class="line"><a class="code" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a48aca158f2feb6c6a64bb5b5de1d52fb">noCFSRatio</a> </div></div><!-- fragment --><p> .</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a9d302f81a00b81a30f11857b3dc251ed" title="If a merged segment will be more than this percentage of the total size of the index, leave the segment as non-compound file even if compound file is enabled. ">setNoCFSRatio</a> </dd></dl>

</div>
</div>
<a id="ae5ea891051aec7617ac9a7ca79991669"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5ea891051aec7617ac9a7ca79991669">&#9670;&nbsp;</a></span>keepFullyDeletedSegment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean org.apache.lucene.index.MergePolicy.keepFullyDeletedSegment </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d76/interfaceorg_1_1apache_1_1lucene_1_1util_1_1_i_o_supplier.html">IOSupplier</a>&lt; <a class="el" href="../../d7/deb/classorg_1_1apache_1_1lucene_1_1index_1_1_codec_reader.html">CodecReader</a> &gt;&#160;</td>
          <td class="paramname"><em>readerIOSupplier</em></td><td>)</td>
          <td> throws IOException</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if the segment represented by the given <a class="el" href="../../d7/deb/classorg_1_1apache_1_1lucene_1_1index_1_1_codec_reader.html" title="LeafReader implemented by codec APIs. ">CodecReader</a> should be keep even if it's fully deleted. </p>
<p>This is useful for testing of for instance if the merge policy implements retention policies for soft deletes. </p>

</div>
</div>
<a id="aff87fc271c4810c7a572a5cc465a3f8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff87fc271c4810c7a572a5cc465a3f8d">&#9670;&nbsp;</a></span>message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final void org.apache.lucene.index.MergePolicy.message </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html">MergeContext</a>&#160;</td>
          <td class="paramname"><em>mergeContext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Print a debug message to <a class="el" href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html">MergeContext</a>'s. </p>
<div class="fragment"><div class="line">infoStream </div></div><!-- fragment --><p> . </p>

</div>
</div>
<a id="afa2933bf91f60a20fc4cf406bbef7223"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa2933bf91f60a20fc4cf406bbef7223">&#9670;&nbsp;</a></span>numDeletesToMerge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int org.apache.lucene.index.MergePolicy.numDeletesToMerge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/df8/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_commit_info.html">SegmentCommitInfo</a>&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>delCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d76/interfaceorg_1_1apache_1_1lucene_1_1util_1_1_i_o_supplier.html">IOSupplier</a>&lt; <a class="el" href="../../d7/deb/classorg_1_1apache_1_1lucene_1_1index_1_1_codec_reader.html">CodecReader</a> &gt;&#160;</td>
          <td class="paramname"><em>readerSupplier</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws IOException</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the number of deletes that a merge would claim on the given segment. </p>
<p>This method will by default return the sum of the del count on disk and the pending delete count. Yet, subclasses that wrap merge readers might modify this to reflect deletes that are carried over to the target segment in the case of soft deletes.</p>
<p>Soft deletes all deletes to survive across merges in order to control when the soft-deleted data is claimed. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="../../df/dbc/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer.html#ae4657245f3b0f7d35eb02d0260be3523" title="Expert: Updates a document by first updating the document(s) containing term with the given doc-value...">IndexWriter::softUpdateDocument</a>(<a class="el" href="../../d4/d58/classorg_1_1apache_1_1lucene_1_1index_1_1_term.html" title="A Term represents a word from text. ">Term</a>, Iterable, Field...) </dd>
<dd>
<a class="el" href="../../d2/dbd/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer_config.html#ab6907e4db5440f38cd98e4290cfd7243" title="Sets the soft deletes field. ">IndexWriterConfig::setSoftDeletesField(String)</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info</td><td>the segment info that identifies the segment </td></tr>
    <tr><td class="paramname">delCount</td><td>the number deleted documents for this segment </td></tr>
    <tr><td class="paramname">readerSupplier</td><td>a supplier that allows to obtain a <a class="el" href="../../d7/deb/classorg_1_1apache_1_1lucene_1_1index_1_1_codec_reader.html">CodecReader</a> for this segment </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8a5b1aa181d6e8e8a33aaca366634688"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a5b1aa181d6e8e8a33aaca366634688">&#9670;&nbsp;</a></span>setMaxCFSSegmentSizeMB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.apache.lucene.index.MergePolicy.setMaxCFSSegmentSizeMB </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If a merged segment will be more than this value, leave the segment as non-compound file even if compound file is enabled. </p>
<p>Set this to Double.POSITIVE_INFINITY (default) and noCFSRatio to 1.0 to always use CFS regardless of merge size. </p>

</div>
</div>
<a id="a9d302f81a00b81a30f11857b3dc251ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d302f81a00b81a30f11857b3dc251ed">&#9670;&nbsp;</a></span>setNoCFSRatio()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.apache.lucene.index.MergePolicy.setNoCFSRatio </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>noCFSRatio</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If a merged segment will be more than this percentage of the total size of the index, leave the segment as non-compound file even if compound file is enabled. </p>
<p>Set to 1.0 to always use CFS regardless of merge size. </p>

</div>
</div>
<a id="a9ebb41c1e60781baa4520e401a413f01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ebb41c1e60781baa4520e401a413f01">&#9670;&nbsp;</a></span>size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long org.apache.lucene.index.MergePolicy.size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/df8/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_commit_info.html">SegmentCommitInfo</a>&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html">MergeContext</a>&#160;</td>
          <td class="paramname"><em>mergeContext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws IOException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the byte size of the provided <a class="el" href="../../d3/df8/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_commit_info.html">SegmentCommitInfo</a>, pro-rated by percentage of non-deleted documents is set. </p>

</div>
</div>
<a id="a860edc0b0f598ea80602d2d9cc9ad1e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a860edc0b0f598ea80602d2d9cc9ad1e6">&#9670;&nbsp;</a></span>useCompoundFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean org.apache.lucene.index.MergePolicy.useCompoundFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/dd4/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_infos.html">SegmentInfos</a>&#160;</td>
          <td class="paramname"><em>infos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/df8/classorg_1_1apache_1_1lucene_1_1index_1_1_segment_commit_info.html">SegmentCommitInfo</a>&#160;</td>
          <td class="paramname"><em>mergedInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html">MergeContext</a>&#160;</td>
          <td class="paramname"><em>mergeContext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws IOException</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if a new segment (regardless of its origin) should use the compound file format. </p>
<p>The default implementation returns <code>true</code> iff the size of the given mergedInfo is less or equal to <a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#adb540cb273f6e238ac9d8272b09762ac">getMaxCFSSegmentSizeMB()</a> and the size is less or equal to the TotalIndexSize * <a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a5f7b62c389429c6503ec5e20ce0e66de">getNoCFSRatio()</a> otherwise <code>false</code>. </p>

</div>
</div>
<a id="ae29240d9b3353d55b12acc96b5f1ac48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae29240d9b3353d55b12acc96b5f1ac48">&#9670;&nbsp;</a></span>verbose()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final boolean org.apache.lucene.index.MergePolicy.verbose </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d9b/interfaceorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy_1_1_merge_context.html">MergeContext</a>&#160;</td>
          <td class="paramname"><em>mergeContext</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns <code>true</code> if the info-stream is in verbose mode. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#aff87fc271c4810c7a572a5cc465a3f8d" title="Print a debug message to MergeContext&#39;s. ">message(String, MergeContext)</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a2c96e6ab195ad84ce9f7ceee20de89a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c96e6ab195ad84ce9f7ceee20de89a7">&#9670;&nbsp;</a></span>DEFAULT_MAX_CFS_SEGMENT_SIZE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final long org.apache.lucene.index.MergePolicy.DEFAULT_MAX_CFS_SEGMENT_SIZE = Long.MAX_VALUE</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default max segment size in order to use compound file system. </p>
<p>Set to <a class="el" href="../../">Long#MAX_VALUE</a>. </p>

</div>
</div>
<a id="a8726975b690fd23559a1f3a57de9caa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8726975b690fd23559a1f3a57de9caa6">&#9670;&nbsp;</a></span>DEFAULT_NO_CFS_RATIO</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final double org.apache.lucene.index.MergePolicy.DEFAULT_NO_CFS_RATIO = 1.0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default ratio for compound file system usage. </p>
<p>Set to <code>1.0</code>, always use compound file system. </p>

</div>
</div>
<a id="aeff9512d7b80ce5c537a55151c693f6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeff9512d7b80ce5c537a55151c693f6e">&#9670;&nbsp;</a></span>maxCFSSegmentSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long org.apache.lucene.index.MergePolicy.maxCFSSegmentSize = <a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html#a2c96e6ab195ad84ce9f7ceee20de89a7">DEFAULT_MAX_CFS_SEGMENT_SIZE</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the size of the merged segment exceeds this value then it will not use compound file format. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/Users/vkroz/src/oss/lucene-solr/lucene/core/src/java/org/apache/lucene/index/MergePolicy.java</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>org</b></li><li class="navelem"><b>apache</b></li><li class="navelem"><a class="el" href="../../d8/d76/namespaceorg_1_1apache_1_1lucene.html">lucene</a></li><li class="navelem"><a class="el" href="../../d2/d12/namespaceorg_1_1apache_1_1lucene_1_1index.html">index</a></li><li class="navelem"><a class="el" href="../../d3/d42/classorg_1_1apache_1_1lucene_1_1index_1_1_merge_policy.html">MergePolicy</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
