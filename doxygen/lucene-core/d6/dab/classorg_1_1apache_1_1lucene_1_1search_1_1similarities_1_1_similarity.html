<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lucene-core-API: org.apache.lucene.search.similarities.Similarity Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Lucene-core-API
   &#160;<span id="projectnumber">8.0.0-SNAPSHOT</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d6/dab/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d9/d9a/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">org.apache.lucene.search.similarities.Similarity Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="../../d6/dab/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity.html" title="Similarity defines the components of Lucene scoring. ">Similarity</a> defines the components of Lucene scoring.  
 <a href="../../d6/dab/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for org.apache.lucene.search.similarities.Similarity:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/dca/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity__inherit__graph.png" border="0" usemap="#org_8apache_8lucene_8search_8similarities_8_similarity_inherit__map" alt="Inheritance graph"/></div>
<map name="org_8apache_8lucene_8search_8similarities_8_similarity_inherit__map" id="org_8apache_8lucene_8search_8similarities_8_similarity_inherit__map">
<area shape="rect" id="node2" href="../../d0/d67/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_b_m25_similarity.html" title="BM25 Similarity. " alt="" coords="299,87,544,128"/>
<area shape="rect" id="node3" href="../../d9/dd4/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_boolean_similarity.html" title="Simple similarity that gives terms a score that is equal to their query boost. " alt="" coords="299,152,544,193"/>
<area shape="rect" id="node4" href="../../d9/db4/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_multi_similarity.html" title="Implements the CombSUM method for combining evidence from multiple similarity values described in: Jo..." alt="" coords="299,217,544,259"/>
<area shape="rect" id="node5" href="../../d3/d65/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_per_field_similarity_wrapper.html" title="Provides the ability to use a different Similarity for different fields. " alt="" coords="299,283,544,324"/>
<area shape="rect" id="node6" href="../../d9/d9c/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity_base.html" title="A subclass of. " alt="" coords="299,348,544,389"/>
<area shape="rect" id="node20" href="../../d4/d01/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_t_f_i_d_f_similarity.html" title="Implementation of Similarity with the Vector Space Model. " alt="" coords="299,445,544,487"/>
<area shape="rect" id="node7" href="../../d8/de9/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_axiomatic.html" title="Axiomatic approaches for IR. " alt="" coords="592,184,837,225"/>
<area shape="rect" id="node14" href="../../dc/d1c/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_d_f_i_similarity.html" title="Implements the Divergence from Independence (DFI) model based on Chi&#45;square statistics (i..." alt="" coords="592,249,837,291"/>
<area shape="rect" id="node15" href="../../dc/d4b/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_d_f_r_similarity.html" title="Implements the divergence from randomness (DFR) framework introduced in Gianni Amati and Cornelis Joo..." alt="" coords="592,315,837,356"/>
<area shape="rect" id="node16" href="../../d3/dd1/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_i_b_similarity.html" title="Provides a framework for the family of information&#45;based models, as described in StÃ©phane Clinchant a..." alt="" coords="592,380,837,421"/>
<area shape="rect" id="node17" href="../../de/d54/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_l_m_similarity.html" title="Abstract superclass for language modeling Similarities. " alt="" coords="592,445,837,487"/>
<area shape="rect" id="node8" href="../../d4/d6e/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_axiomatic_f1_e_x_p.html" title="F1EXP is defined as Sum(tf(term_doc_freq)*ln(docLen)*IDF(term)) where IDF(t) = pow((N+1)/df(t), k) N=total num of docs, df=doc freq. " alt="" coords="885,5,1131,47"/>
<area shape="rect" id="node9" href="../../df/df4/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_axiomatic_f1_l_o_g.html" title="F1LOG is defined as Sum(tf(term_doc_freq)*ln(docLen)*IDF(term)) where IDF(t) = ln((N+1)/df(t)) N=tota..." alt="" coords="885,71,1131,112"/>
<area shape="rect" id="node10" href="../../d7/dd6/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_axiomatic_f2_e_x_p.html" title="F2EXP is defined as Sum(tfln(term_doc_freq, docLen)*IDF(term)) where IDF(t) = pow((N+1)/df(t), k) N=total num of docs, df=doc freq. " alt="" coords="885,136,1131,177"/>
<area shape="rect" id="node11" href="../../db/d67/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_axiomatic_f2_l_o_g.html" title="F2EXP is defined as Sum(tfln(term_doc_freq, docLen)*IDF(term)) where IDF(t) = ln((N+1)/df(t)) N=total..." alt="" coords="885,201,1131,243"/>
<area shape="rect" id="node12" href="../../d4/dd9/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_axiomatic_f3_e_x_p.html" title="F3EXP is defined as Sum(tf(term_doc_freq)*IDF(term)&#45;gamma(docLen, queryLen)) where IDF(t) = pow((N+1)..." alt="" coords="885,267,1131,308"/>
<area shape="rect" id="node13" href="../../dc/d6c/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_axiomatic_f3_l_o_g.html" title="F3EXP is defined as Sum(tf(term_doc_freq)*IDF(term)&#45;gamma(docLen, queryLen)) where IDF(t) = ln((N+1)/..." alt="" coords="885,332,1131,373"/>
<area shape="rect" id="node18" href="../../d5/d24/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_l_m_dirichlet_similarity.html" title="Bayesian smoothing using Dirichlet priors. " alt="" coords="885,413,1131,455"/>
<area shape="rect" id="node19" href="../../d8/d26/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_l_m_jelinek_mercer_similarity.html" title="Language model based on the Jelinek&#45;Mercer smoothing method. " alt="" coords="885,479,1131,520"/>
<area shape="rect" id="node21" href="../../d1/dc3/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_classic_similarity.html" title="Expert: Historical scoring implementation. " alt="" coords="592,511,837,552"/>
</map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>SimScorer</b></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the weight for a query across the indexed collection. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a76f1c446723fc9041c7d69991c070ce8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dab/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity.html#a76f1c446723fc9041c7d69991c070ce8">Similarity</a> ()</td></tr>
<tr class="memdesc:a76f1c446723fc9041c7d69991c070ce8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sole constructor.  <a href="#a76f1c446723fc9041c7d69991c070ce8">More...</a><br /></td></tr>
<tr class="separator:a76f1c446723fc9041c7d69991c070ce8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75cb8d6258955f407eeaea3f41cb7c1d"><td class="memItemLeft" align="right" valign="top">abstract long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dab/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity.html#a75cb8d6258955f407eeaea3f41cb7c1d">computeNorm</a> (<a class="el" href="../../d9/dfa/classorg_1_1apache_1_1lucene_1_1index_1_1_field_invert_state.html">FieldInvertState</a> state)</td></tr>
<tr class="memdesc:a75cb8d6258955f407eeaea3f41cb7c1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the normalization value for a field, given the accumulated state of term processing for this field (see <a class="el" href="../../">FieldInvertState</a>).  <a href="#a75cb8d6258955f407eeaea3f41cb7c1d">More...</a><br /></td></tr>
<tr class="separator:a75cb8d6258955f407eeaea3f41cb7c1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55ff050f7421a11b5c14c4f0faaa702a"><td class="memItemLeft" align="right" valign="top">abstract SimScorer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dab/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity.html#a55ff050f7421a11b5c14c4f0faaa702a">scorer</a> (float boost, <a class="el" href="../../d2/d89/classorg_1_1apache_1_1lucene_1_1search_1_1_collection_statistics.html">CollectionStatistics</a> collectionStats, TermStatistics... termStats)</td></tr>
<tr class="memdesc:a55ff050f7421a11b5c14c4f0faaa702a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute any collection-level weight (e.g.  <a href="#a55ff050f7421a11b5c14c4f0faaa702a">More...</a><br /></td></tr>
<tr class="separator:a55ff050f7421a11b5c14c4f0faaa702a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="../../d6/dab/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity.html" title="Similarity defines the components of Lucene scoring. ">Similarity</a> defines the components of Lucene scoring. </p>
<p>Expert: Scoring API. </p>
<p>This is a low-level API, you should only extend this API if you want to implement an information retrieval <em>model</em>. If you are instead looking for a convenient way to alter Lucene's scoring, consider just tweaking the default implementation: <a class="el" href="../../d0/d67/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_b_m25_similarity.html">BM25Similarity</a> or extend <a class="el" href="../../d9/d9c/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity_base.html">SimilarityBase</a>, which makes it easy to compute a score from index statistics. </p>
<p><a class="el" href="../../d6/dab/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity.html" title="Similarity defines the components of Lucene scoring. ">Similarity</a> determines how Lucene weights terms, and Lucene interacts with this class at both <a href="../../#indextime">index-time</a> and <a href="../../#querytime">query-time</a>. </p>
<p><a class="anchor" id="indextime"></a>Indexing Time At indexing time, the indexer calls <a class="el" href="../../d6/dab/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity.html#a75cb8d6258955f407eeaea3f41cb7c1d">computeNorm(FieldInvertState)</a>, allowing the <a class="el" href="../../d6/dab/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity.html" title="Similarity defines the components of Lucene scoring. ">Similarity</a> implementation to set a per-document value for the field that will be later accessible via <a class="el" href="../../dd/dd2/classorg_1_1apache_1_1lucene_1_1index_1_1_leaf_reader.html#a64a3371159937871f5d40c30368cdec1">org.apache.lucene.index.LeafReader#getNormValues(String)</a>. Lucene makes no assumption about what is in this norm, but it is most useful for encoding length normalization information. </p>
<p>Implementations should carefully consider how the normalization is encoded: while Lucene's <a class="el" href="../../d0/d67/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_b_m25_similarity.html">BM25Similarity</a> encodes length normalization information with <a class="el" href="../../">SmallFloat</a> into a single byte, this might not be suitable for all purposes. </p>
<p>Many formulas require the use of average document length, which can be computed via a combination of <a class="el" href="../../d2/d89/classorg_1_1apache_1_1lucene_1_1search_1_1_collection_statistics.html#a4532e2be5dfb30cf709aeabaa8646e91">CollectionStatistics#sumTotalTermFreq()</a> and <a class="el" href="../../d2/d89/classorg_1_1apache_1_1lucene_1_1search_1_1_collection_statistics.html#a34dc0460c8ec84938745eccf16ff8362">CollectionStatistics#docCount()</a>. </p>
<p>Additional scoring factors can be stored in named <a class="el" href="../../">NumericDocValuesField</a>s and accessed at query-time with <a class="el" href="../../dd/dd2/classorg_1_1apache_1_1lucene_1_1index_1_1_leaf_reader.html#a7af10cf9ce4cf67845bb43706e44499b">org.apache.lucene.index.LeafReader#getNumericDocValues(String)</a>. However this should not be done in the <a class="el" href="../../d6/dab/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity.html">Similarity</a> but externally, for instance by using <code>FunctionScoreQuery</code>. </p>
<p>Finally, using index-time boosts (either via folding into the normalization byte or via DocValues), is an inefficient way to boost the scores of different fields if the boost will be the same for every document, instead the <a class="el" href="../../d6/dab/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity.html" title="Similarity defines the components of Lucene scoring. ">Similarity</a> can simply take a constant boost parameter <em>C</em>, and <a class="el" href="../../d3/d65/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_per_field_similarity_wrapper.html">PerFieldSimilarityWrapper</a> can return different instances with different boosts depending upon field name. </p>
<p><a class="anchor" id="querytime"></a><a class="el" href="../../d7/d78/classorg_1_1apache_1_1lucene_1_1search_1_1_query.html" title="The abstract base class for queries. ">Query</a> time At query-time, Queries interact with the <a class="el" href="../../d6/dab/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity.html" title="Similarity defines the components of Lucene scoring. ">Similarity</a> via these steps: </p><ol>
<li>
The <a class="el" href="../../">scorer(float, CollectionStatistics, TermStatistics...)</a> method is called a single time, allowing the implementation to compute any statistics (such as IDF, average document length, etc) across <em>the entire collection</em>. The <a class="el" href="../../d1/d5f/classorg_1_1apache_1_1lucene_1_1search_1_1_term_statistics.html">TermStatistics</a> and <a class="el" href="../../d2/d89/classorg_1_1apache_1_1lucene_1_1search_1_1_collection_statistics.html">CollectionStatistics</a> passed in already contain all of the raw statistics involved, so a <a class="el" href="../../d6/dab/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity.html" title="Similarity defines the components of Lucene scoring. ">Similarity</a> can freely use any combination of statistics without causing any additional I/O. Lucene makes no assumption about what is stored in the returned <a class="el" href="../../">Similarity.SimScorer</a> object. </li>
<li>
Then <a class="el" href="../../">SimScorer#score(float, long)</a> is called for every matching document to compute its score. </li>
</ol>
<p><a class="anchor" id="explaintime"></a>Explanations When <a class="el" href="../../d2/d3a/classorg_1_1apache_1_1lucene_1_1search_1_1_index_searcher.html#ada737ebdbaabe5ab7566d260fa317e15">IndexSearcher#explain(org.apache.lucene.search.Query, int)</a> is called, queries consult the <a class="el" href="../../d6/dab/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity.html" title="Similarity defines the components of Lucene scoring. ">Similarity</a>'s DocScorer for an explanation of how it computed its score. The query passes in a the document id and an explanation of how the frequency was computed.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d2/dbd/classorg_1_1apache_1_1lucene_1_1index_1_1_index_writer_config.html#a2c29cfb247ecbda79468ce47b93738f2" title="Expert: set the Similarity implementation used by this IndexWriter. ">org.apache.lucene.index.IndexWriterConfig::setSimilarity(Similarity)</a> </dd>
<dd>
<a class="el" href="../../d2/d3a/classorg_1_1apache_1_1lucene_1_1search_1_1_index_searcher.html#a03fd356eece4787aac30d95b422480d6" title="Expert: Set the Similarity implementation used by this IndexSearcher. ">IndexSearcher::setSimilarity(Similarity)</a> .experimental </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a76f1c446723fc9041c7d69991c070ce8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76f1c446723fc9041c7d69991c070ce8">&#9670;&nbsp;</a></span>Similarity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">org.apache.lucene.search.similarities.Similarity.Similarity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sole constructor. </p>
<p>(For invocation by subclass constructors, typically implicit.) </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a75cb8d6258955f407eeaea3f41cb7c1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75cb8d6258955f407eeaea3f41cb7c1d">&#9670;&nbsp;</a></span>computeNorm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract long org.apache.lucene.search.similarities.Similarity.computeNorm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/dfa/classorg_1_1apache_1_1lucene_1_1index_1_1_field_invert_state.html">FieldInvertState</a>&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Computes the normalization value for a field, given the accumulated state of term processing for this field (see <a class="el" href="../../">FieldInvertState</a>). </p>
<p><a class="el" href="../../df/d07/interfaceorg_1_1apache_1_1lucene_1_1search_1_1_matches.html" title="Reports the positions and optionally offsets of all matching terms in a query for a single document...">Matches</a> in longer fields are less precise, so implementations of this method usually set smaller values when <code>state.getLength()</code> is large, and larger values when <code>state.getLength()</code> is small.</p>
<p>Note that for a given term-document frequency, greater unsigned norms must produce scores that are lower or equal, ie. for two encoded norms </p><div class="fragment"><div class="line">n1 </div></div><!-- fragment --><p> and</p><div class="fragment"><div class="line">n2 </div></div><!-- fragment --><p> so that </p><div class="fragment"><div class="line">Long.compareUnsigned(n1, n2) &amp;gt; 0 </div></div><!-- fragment --><p> then </p><div class="fragment"><div class="line">SimScorer.score(freq, n1) &amp;lt;= SimScorer.score(freq, n2) </div></div><!-- fragment --><p> for any legal</p><div class="fragment"><div class="line">freq </div></div><!-- fragment --><p> .</p>
<div class="fragment"><div class="line">0 </div></div><!-- fragment --><p> is not a legal norm, so</p><div class="fragment"><div class="line">1 </div></div><!-- fragment --><p> is the norm that produces the highest scores.</p>
<p>.experimental</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>current processing state for this field </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>computed norm value </dd></dl>

</div>
</div>
<a id="a55ff050f7421a11b5c14c4f0faaa702a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55ff050f7421a11b5c14c4f0faaa702a">&#9670;&nbsp;</a></span>scorer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract SimScorer org.apache.lucene.search.similarities.Similarity.scorer </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>boost</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d89/classorg_1_1apache_1_1lucene_1_1search_1_1_collection_statistics.html">CollectionStatistics</a>&#160;</td>
          <td class="paramname"><em>collectionStats</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TermStatistics...&#160;</td>
          <td class="paramname"><em>termStats</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute any collection-level weight (e.g. </p>
<p>IDF, average document length, etc) needed for scoring a query.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">boost</td><td>a multiplicative factor to apply to the produces scores </td></tr>
    <tr><td class="paramname">collectionStats</td><td>collection-level statistics, such as the number of tokens in the collection. </td></tr>
    <tr><td class="paramname">termStats</td><td>term-level statistics, such as the document frequency of a term across the collection. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SimWeight object with the information this <a class="el" href="../../d6/dab/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity.html" title="Similarity defines the components of Lucene scoring. ">Similarity</a> needs to score a query. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/Users/vkroz/src/oss/lucene-solr/lucene/core/src/java/org/apache/lucene/search/similarities/Similarity.java</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>org</b></li><li class="navelem"><b>apache</b></li><li class="navelem"><a class="el" href="../../d8/d76/namespaceorg_1_1apache_1_1lucene.html">lucene</a></li><li class="navelem"><a class="el" href="../../dc/d25/namespaceorg_1_1apache_1_1lucene_1_1search.html">search</a></li><li class="navelem"><a class="el" href="../../d3/d3c/namespaceorg_1_1apache_1_1lucene_1_1search_1_1similarities.html">similarities</a></li><li class="navelem"><a class="el" href="../../d6/dab/classorg_1_1apache_1_1lucene_1_1search_1_1similarities_1_1_similarity.html">Similarity</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
